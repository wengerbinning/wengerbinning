# Vim

[//]: # (__author__ = "Clark Aaron")

vim是vi的增强版本。在vi出现之前，ed是标准UNIX系统编辑器，是一个面向行的编辑器，所以在编辑文件时很难看到文本的上下文；之后出现了ex,
相较于ed,ex提供了编辑-显示功能，可以显示一屏文本而不仅是一行文本。在使用ex时，可通过输入vi(Visual mode)启动该编辑-显示功能；
后来，出现了一个程序，在打开ex编辑时运行该编辑-显示功能而不必在输入vi打开，这款程序便是vi。Linux提供vi的多个版本，或者说多个克隆，
这些版本中有elvis、nvi、vile等，都对vi做了扩展。在学习过程中，可以使用vimtutor来查看vim的使用说明。这里我们以vim作为学习的基础。
在使用vim时，需要将使用的终端类型传递给vim,对于很多系统，指定终端类型是自动设定的。如果vim在启动后出现扭曲变形，则可能是终端类型没有设置正确。
vim有两种模式：命令模式（普通模式）与输入模式（编辑模式），在命令模式时，用户可以使用各种命令来操作文件，通过一些设定的按键，可以从命令模式转化为输入模式，
同时通过`Escape`按键可以退出编辑模式返回命令模式。在命令模式之中可以在细分出一类行命令模式，该模式可以用该设置参数，行跳转、内容搜索等。


## vim 基础操作键

![vim 键盘图](/Resources/Images/b0230000.gif)

| 按键 | 说明 |
|:----:|:---- |
| `ESC` | 命令模式切换,在非命令模式下时,按`ESC`切换到命令行模式 |

## vim 的状态模式

vim 有四种模式:`NORMAL` mode(普通模式)、`Visual` mode(视觉模式)、`INSERT` mode(输入模式)、 `Command-line` mode(命令行模式);

### NORMAL MODE

* 普通模式是vim打开时的默认模式,在该模式下,所有的按键被视为命令按键,其他两类模式也需要在该模式下切换;

> 使用{`a|A`,`i|I`,`o|O`}可以切换到输入模式: ☟

| 按键 | 说明 |
|:----:|:---- |
| `a` or `A` | 在进入输入模式时,使用`a`时,光标会移动到当前光标的后面; 使用`A`时,在进入输入模式时,光标会移动到行末 |
| `i` or `I` | 在进入输入模式时,使用`i`时,光标会移动到当前光标的前面; 使用`I`时,在进入输入模式时,光标会移动到行首 |
| `o` or `O` | 在进入输入模式时,使用`o`时,会在当前行之后新建一行,光标移到新建行的行首; 使用`O`时,会在当前行之前新建一行,光标会移动到新建行的行首 |
| `r` or `R` | 在进入代替模式时,使用`r`时,只会取代当前光标所在字符一次后返回普通模式; 使用`R`时,会将当前光标所在字符及以后依次取代 |

> 光标管理: ☟

* 如果需要移动多个单位,只需在单位数后按先以下命令

| 按键 | 说明 | 按键 | 说明 |
|:----:|:---- |:----:|:---- |
| `h` or `◀`| 光标向左移一个单位 | `l` or `▶`| 光标向右移一个单位 |
| `j` or `▼`| 光标向下移一个单位 | `k` or `▲`| 光标向上移一个单位 |
| `+` | 光标移动到下一行的行首 | `-` | 光标移动到上一行的行首 |
| `Space` | 光标向后移动一个单位,末尾时跳到下一行的行首 | `BackSpace` | 光标向前移动一个单位,行首时跳到上一行的行末 |
| `0` or `Home` | 光标移动到行首 | `$` or `End` | 光标移动到行末 |
| `H` | 光标移动到当前页的首行行首 | `L` | 光标移动到当前页的末行行首 | 
| `M` | 光标移动到当前页的中间行的行首| `G` | 光标移动到文件最后一行的行首,前面加行数时,移动到指定行数的行首 |
| `g`+`g` | 光标移动到文件的首行行首 | `Enter` | 光标向下移动一行 |

> 页面管理: ☟

| 按键 | 说明 | 按键 | 说明 |
|:----:|:---- |:----:|:--- |
| `Ctrl` + `F` or `Page Down`| 向下翻一页 | `Ctrl` + `B` or `Page Up` | 向上翻一页 |
| `Ctrl` + `D` | 向下翻半页 | `Ctrl` + `U` | 向上翻半页 |

> 内容管理: ☟

| 按键 | 说明 | 按键 | 说明 |
|:----:|:---- |:----:|:--- |
| `x` or `X` | 删除,使用`x`时,向后删除; 使用`X`时,向前删除 | `p` or `P` | 粘贴,使用`p`时,粘贴在当前行的前面,使用`P`时,粘贴在当前行的后面 |
| `d`+`d` | 删除当前行,前加数字时,删除之后的指定行数 | `y`+`y` | 复制当前行,在前加数字,复制当前行之后的指定行数 |
| `d`+`1`+`G` | 删除当前行到第一行所有内容 | `y`+`1`+`G` | 复制当前行到第一行所有内容 |
| `d`+`G` | 删除当前行到最后一行所有内容 | `y`+`G` | 复制当前行到最后一行的内容 |
| `d`+`0` | 删除光标当前字符到该行的第一个字符的内容 | `y`+`0` | 复制光标所在字符到该行的第一个字符的内容 |
| `d`+`$` | 删除光标当前字符到该行的最后一个字符的内容 |`y`+`$` | 复制光标所在字符到该行的最后一个字符的内容 |
| `J` | 将光标所在行与下一行内容合并 | c | 重复删除多行数据,例如`10cj`向下删除10行 |
| `u` | 撤销上一个指令 | `Ctrl`+`r` | 重做上一个指令 |
| `.` | 重复上一个指令 |  


#### COMMAND-LINE

所为的单行命令模式是在命令模式下的功能。

* `:`: 输入命令
* `/`: 从光标以下寻找关键词; 在查询后输入`n` or `N`,查找下一个(n),上一个(N);
* `?`: 从光标以上寻找关键词; 在查询后输入`n` or `N`,查找上一个(n),下一个(N);
* `:`+n1, n2+`s/`+oldword+`/`+newword+`/g`: 在第n1与n2行之间将第一个字符串用第二个字符串替换,在最后面的`g`后面加c则给出提示;

### VISUAL MODE

* 按`Ctrl`+`v`进入视觉模式,

### INSERT MODE

* 从普通模式进入输入模式后则可以编辑文本内容(除`ESC`键外);

### REPLACE MODE

在普通模式下按下R进入替换模式，按r只对当前字符进行替换vi应该没有吧@!@r.

## 插件

* `https://github.com/mhinz/vim/startify`：修改启动界面。
* `https://github.com/vim-airline/vim-airline`：状态栏美化。
* `https://github.com/yggdroot/indentline`：代码缩进。

* Plug "yggdroot/indentline",添加到`.vimrc`文件中，使用":source ~/.vimrc".
* `PlugInstall`

* `github.com/w0ng/vim-hybrid`：vim-hybrid配色。
* `github.com/altercation/vim-colors-solarized`：solarozed配色。
* `github.com/morhetz/gruvbox`：gruvbox配色。


## 资源链接

> [官方网站](https://www.vim.org/) ☛ <https://www.vim.org/>

1. [官方文档](https://www.vim.org/docs.php) ☛ <https://www.vim.org/docs.php>
   * [帮助文档](https://vimhelp.org/) ☛ <https://vimhelp.org/>
   * [书籍资料](https://iccf-holland.org/vim_books.html) ☛ <https://iccf-holland.org/vim_books.html>

2. [下载资源](https://www.vim.org/download.php) ☛ <https://www.vim.org/download.php>